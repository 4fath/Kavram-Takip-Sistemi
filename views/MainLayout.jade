doctype html
html
    head
        title= title
        link(rel='stylesheet', href='/css/bootstrap.css')
        link(rel='stylesheet', href='/css/bootstrap.min.css')
        link(rel='stylesheet', href='/css/style.css')
        script(src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js')
        script(src='/js/add_topic.js', type='text/javascript')
        script(src='../ckeditor/ckeditor.js')
        script(type='text/javascript', src='http://latex.codecogs.com/integration/ckeditor/ckeditor.js')
        link(href='/css/dropdown.css', rel='stylesheet')
        link(href='/css/awesomplete.css', rel='stylesheet')
        script(src='/js/dropdown.js', type='text/javascript')
        //script(type='text/javascript').
        //    alert('hello world');
        //    $(document).ready(function () {
        //        console.log("iceri girdi");
        //        console.log("iceri girdi 2");
        //        var myMainTopics;
        //        var mySubTopics;
        //        var myKeywords;
        //        $.get("http://localhost:3000/topic/getValueArray", function (data, status) {
        //            console.log("GET request atildi");
        //            var returnedData = JSON.parse(data);
        //            myMainTopics = returnedData.mainTopics;
        //            mySubTopics = returnedData.subTopics;
        //            myKeywords = returnedData.keywords;
        //            alert("Data: " + returnedData.mainTopics[0].name + "\\nStatus: " + status);
        //            console.log(myMainTopics);
        //            var test = $('.main_topic_select').val();
        //            console.log(test);
        //        });
        //        //If parent option is changed
        //        $("#main_topic_select").change(function () {
        //            console.log("degisti degişti");
        //            var parent = $(this).val(); //get option value from parent
        //            console.log(parent);
        //            // switch (parent) { //using switch compare selected option and populate child
        //            //     case 'chocolates':
        //            //         list(chocolates);
        //            //         break;
        //            //     case 'vegetables':
        //            //         list(vegetables);
        //            //         break;
        //            //     case 'icecreams':
        //            //         list(icecreams);
        //            //         break;
        //            //     default: //default child option is blank
        //            //         $("#child_selection").html('');
        //            //         break;
        //            // }
        //        });
        //        //function to populate child select box
        //        function list(array_list) {
        //            $("#child_selection").html(""); //reset child options
        //            var selectedMain = $('parent_selection').val();
        //            console.log(selectedMain);
        //            $(array_list).each(function (i) { //populate child options
        //                $("#child_selection").append("<option value=\\"
        //                " + array_list[i].value + "\">" + array_list[i].display + "</option>"
        //                )
        //                ;
        //            });
        //        }
        //    });
    body
        != messages()
        .container-fluid
            .row
                .col-md-12
                    nav.navbar.navbar-inverse
                        .container-fluid
                            // Brand and toggle get grouped for better mobile display
                            .navbar-header
                                button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#bs-example-navbar-collapse-1', aria-expanded='false')
                                    span.sr-only Toggle navigation
                                    span.icon-bar
                                    span.icon-bar
                                    span.icon-bar

                                a(href='/')
                                    img(src='/logo.jpg', height=60, width=60)
                                a.navbar-brand(href='/')
                                    | KavramTakip

                            // Collect the nav links, forms, and other content for toggling
                            #bs-example-navbar-collapse-1.collapse.navbar-collapse
                                .col-md-3
                                //form.navbar-form.navbar-left(role='form', method='post', action='/topic/findTopic')
                                //    .form-group
                                //        datalist#mylist
                                //            each topic in topics
                                //                option #{topic.name}
                                //        input.form-control.awesomplete(type='text', name='kavramAdi',list='mylist')
                                //        //input.form-control(type='text', placeholder='Kavram adı giriniz')
                                //        button.btn.btn-default(type='submit') Ara

                                if !user
                                    ul.nav.navbar-nav.navbar-right
                                        .navbar-form
                                            .form-group
                                                button.btn.btn-success(type= 'submit', name = 'Submit', onclick="location.href='/user/login';")
                                                    | Giriş
                                            .form-group
                                                button.btn.btn-warning(type='submit', name = 'Submit' onclick="location.href='/user/register';")
                                                    | Kaydol


                                if user
                                    ul.nav.navbar-nav.navbar-right
                                        .navbar-form.form-group
                                            button.btn.btn-success(type='submit', name = 'Submit' onclick="location.href='/topic/addTopic';")
                                                span.glyphicon.glyphicon-plus(aria-hidden='true')
                                                    |  Kavram Ekle
                                            if userRole == 'admin'
                                                button.btn.btn-info(type='submit', name = 'Submit' onclick="location.href='/user/adminProfile';") Ayarlar
                                            else
                                                if userRole == 'chiefEditor'
                                                    a.btn.btn-info.btn-md(href='/user/chiefEditorProfile')
                                                        span.glyphicon.glyphicon-user
                                                        |  Ayarlar
                                                else
                                                    if userRole == 'editor'
                                                        button.btn.btn-info(type='submit', name = 'Submit' onclick="location.href='/user/editorProfile';")
                                                            | Ayarlar
                                                    else
                                                        if userRole == 'author'
                                                            a.btn.btn-info.btn-md(href='/user/authorProfile')
                                                                span.glyphicon.glyphicon-user
                                                                |  Ayarlar


                                            button.btn.btn-warning(type='submit', name = 'Submit' onclick="location.href='/user/logout';")
                                                | Çıkış !
                    .row
                        .col-md-2
                            .list-group
                                .col-md-12
                                    span.list-group-item.active(href='#')
                                        | Temel Alanlar
                                        span#slide-submenu.pull-right
                                            i.fa.fa-times
                                    if mainTopics
                                        each mainTopic in mainTopics
                                            a.list-group-item(href='/mainTopic/#{mainTopic._id}')
                                                i.fa
                                                |  #{mainTopic.name}
                                                if mainTopic.relevantSubTopics.length > 0
                                                    span.badge #{mainTopic.relevantSubTopics.length}
                                                else
                                                    span.badge 0
                        .col-md-8
                            block content
                        .col-md-2
                            if user
                                .list-group
                                    .col-md-12
                                        span.list-group-item.active(href='#')
                                            | Popüler Kavramlar
                                            span#slide-submenu.pull-right
                                                i.fa.fa-times
                                        if populerTopics
                                            each populerTopic in populerTopics
                                                a.list-group-item(href='/topic/getTopic/#{populerTopic._id}')
                                                    i.fa
                                                    |  #{populerTopic.name}
                                                    span.badge #{populerTopic.viewCount}


                                .list-group
                                    .col-md-12
                                        span.list-group-item.active(href='#')
                                            | Tavsiye Edilen Kavramlar
                                            span#slide-submenu.pull-right
                                                i.fa.fa-times
                                        if onerilenTopicler
                                            each topic in onerilenTopicler
                                                a.list-group-item(href='/topic/getTopic/#{topic._id}')
                                                    i.fa
                                                    |  #{topic.name}
                                                    span.badge #{topic.viewCount}

